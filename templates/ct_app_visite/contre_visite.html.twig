{% extends 'base.html.twig' %}

{% block title %}Contre visite{% endblock %}

{% block app_ct %}
<div class="box">
    {# <div class="box-header-right"></div>
    <div class="box-header-left"></div> #}
    <div class="box-header">CONTRE VISITE</div>
</div>
<div class="box">
    <div class="entete-formulaire">Recherche</div><br>
    <div>
        <table class="table" style="width:100%;">
            <tbody>
                <tr>
                    <td style="width:50%;">
                        <form class="mt-2 mt-md-0 d-none d-lg-block search-input" action="{{ path('app_ct_app_visite_contre_visite') }}">
                            <div class="">
                                <strong>Par numéro d'immatriculation :</strong><br>
                                <span class="input-group-addon d-flex align-items-center"><i class="icon-magnifier icons"></i></span>
                                <input type="text" name="search-immatriculation" id="search-immatriculation" class="form-control" placeholder="numéro d'immatriculation...">
                                <button class="btn btn-primary" type="submit" style="float:right">
                                    Rechercher
                                </button>
                            </div>
                        </form>
                    </td>
                    <td style="width:50%;">
                        <form class="mt-2 mt-md-0 d-none d-lg-block search-input" action="{{ path('app_ct_app_visite_contre_visite') }}">
                            <div class="">
                                <strong>Par numéro dans la série du type :</strong><br>
                                <span class="input-group-addon d-flex align-items-center"><i class="icon-magnifier icons"></i></span>
                                <input type="text" name="search-numero-serie" id="search-numero-serie" class="form-control" placeholder="numéro de série...">
                                <button class="btn btn-primary" type="submit" style="float:right">
                                    Rechercher
                                </button>
                            </div>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

{# à mettre ici un message flash quand l'information véhicule n'existe pas #}
{% if recherche_ok == true and contre == false %}
    <div style="text-align:center;align:center;color:white;background-color:red">
        {{  message_indisponible_contre }}
    </div>
{% endif %}

{% if enregistrement_ok is not empty or enregistrement_ok is not null %}
    {% if enregistrement_ok == true %}
        <div style="text-align:center;align:center;color:white;background-color:green">
            {{ message }}
        </div>
    {% endif %}
    {% if enregistrement_ok == false %}
        <div style="text-align:center;align:center;color:white;background-color:red">
            {{ message }}
        </div>
    {% endif %}
{% endif %}

{{ form_start(form_visite) }}
    {# {{ form_widget(form_carte_grise.ct_vehicule_id) }} #}
    <table class="table bordure" style="width:100%;">
        <tbody>
            <tr>
                <td style="width:50%;">
                    <div class="box">
                        <div class="entete-formulaire">Information carte grise</div><hr>
                            {{ form_row(form_visite.ct_carte_grise_id.ct_centre_id) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_date_emission) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_immatriculation) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_num_identification) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_nom) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_prenom) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_profession) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_adresse) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_phone) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_commune) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_utilisation_id) }}
                            <hr>
                            {{ form_row(form_visite.ct_carte_grise_id.cg_is_transport) }}
                            <div class="sitransport">
                            {{ form_row(form_visite.ct_carte_grise_id.cg_nom_cooperative) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_itineraire) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_num_vignette) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_lieu_vignette) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_date_vignette) }}
                            {# {{ form_row(form_visite.ct_carte_grise_id.ct_zone_desserte_id) }} #}
                            </div>
                            <hr>
                            {{ form_row(form_visite.ct_carte_grise_id.cg_num_carte_violette) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_lieu_carte_violette) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_date_carte_violette) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_patente) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_ani) }}
                    </div>
                    <div class="box">
                        <div class="entete-formulaire">Information véhicule</div><hr>
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.ct_genre_id) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_type) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.ct_marque_id) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_num_serie) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_carrosserie_id) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_num_moteur) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_source_energie_id) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_cylindre) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_puissance) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_nbr_assis) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_poids_vide) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_charge_utile) }}
                            {{ form_row(form_visite.ct_carte_grise_id.ct_vehicule_id.vhc_poids_total_charge) }}
                            {{ form_row(form_visite.ct_carte_grise_id.cg_mise_en_service) }}
                    </div>
                </td>

                <td style="width:50%;">
                    <div class="box">
                        <div class="entete-formulaire">Information visite technique</div><hr>
                            {% if contre == false %}
                                <div style="visibility:hidden;">
                            {% else %}
                                <div>
                            {% endif %}
                                {{ form_row(form_visite.ct_centre_id) }}
                                {{ form_row(form_visite.ct_type_visite_id) }}
                                {{ form_row(form_visite.ct_usage_id) }}
                                {# {{ form_row(form_visite.ct_utilisation_id) }} #}
                                {{ form_row(form_visite.vst_anomalie_id) }}
                                <div class="duree">
                                {{ form_row(form_visite.vst_duree_reparation, { 'attr':{'disabled':'disabled'} }) }}
                                </div>
                                {{ form_row(form_visite.vst_date_expiration) }}
                                {{ form_row(form_visite.ct_verificateur_id) }}
                                {# {{ form_row(form_visite.vst_extra) }} #}
                                {% do form_visite.vst_extra.setRendered() %}
                            </div>
                    </div>
                </td>
            </tr>
            <tr>
            </tr>
        </tbody>
    </table>
    <div class="box">
        <button class="btn btn-success"><i class="fa fa-book" aria-hidden="true"></i> {{ button_label|default('Enregistrer') }}</button>
    </div>
{{ form_end(form_visite) }}
{% endblock %}
